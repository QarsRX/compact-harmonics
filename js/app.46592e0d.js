(function(){"use strict";var e={2176:function(e,t,n){var a=n(5130),r=n(6768),o=n(6450),i=n(8477);function l(e,t){const n=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(o.E,null,{default:(0,r.k6)((()=>[(0,r.bF)(i.Y,null,{default:(0,r.k6)((()=>[(0,r.bF)(n)])),_:1})])),_:1})}var u=n(1241);const c={},d=(0,u.A)(c,[["render",l]]);var s=d,f=(n(5524),n(1036)),p=n(8221),v=n(2231);const h={dark:!0,colors:{background:"#1E1E2F",surface:"#2A2A3D",primary:"#90CAF9",secondary:"#424242",accent:"#64FFDA",error:"#EF5350",info:"#29B6F6",success:"#66BB6A",warning:"#FFA726"}};var m=(0,f.$N)({blueprint:v.F,theme:{defaultTheme:"charcoalDarkTheme",themes:{charcoalDarkTheme:h}},icons:{defaultSet:"mdi",aliases:p.z,sets:{mdi:p.r}}});async function b(){const e=await n.e(53).then(n.t.bind(n,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var g=n(1387),y=n(2600),k=n(3813),w=n(6756),F=n(5526),_=n(5126);const C={class:"home"};function A(e,t,n,a,o,i){const l=(0,r.g2)("TopMenu"),u=(0,r.g2)("SidebarNav");return(0,r.uX)(),(0,r.CE)("div",C,[(0,r.bF)(l),(0,r.bF)(u),(0,r.bF)(k.I,null,{default:(0,r.k6)((()=>[(0,r.bF)(w.L,null,{default:(0,r.k6)((()=>[(0,r.bF)(F.B,null,{default:(0,r.k6)((()=>[(0,r.bF)(_.y,{class:"mx-auto my-6","max-width":"228",src:y})])),_:1})])),_:1}),(0,r.bF)(w.L,null,{default:(0,r.k6)((()=>[(0,r.bF)(F.B,null,{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("h1",null,"Welcome to Group 6 project: Current Harmonics and Callibration Device",-1)]))),_:1})])),_:1})])),_:1})])}var L=n(2296),x=n(8332),T=n(8088),E=n(7511),D=n(6498),O=n(2585);const z={class:"pa-2"};function M(e,t,n,a,o,i){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(x.Z,{onClick:t[0]||(t[0]=e=>o.drawer=!o.drawer)},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("ðŸ“‹")]))),_:1}),(0,r.bF)(O.e,{width:200,modelValue:o.drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>o.drawer=e),temporary:""},{append:(0,r.k6)((()=>[(0,r.Lk)("div",z,[(0,r.bF)(T.D,{block:""},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" Add device ")]))),_:1})])])),default:(0,r.k6)((()=>[(0,r.bF)(D.g,{title:"List of devices"}),(0,r.bF)(E.G),(0,r.bF)(D.g,{link:"",title:"Device 1",to:"/device1"}),(0,r.bF)(D.g,{link:"",title:"Device 2",to:"/device2"}),(0,r.bF)(D.g,{link:"",title:"Device 3",to:"/device3"})])),_:1},8,["modelValue"])])}var B={data(){return{drawer:!1}}};const j=(0,u.A)(B,[["render",M]]);var H=j,S={name:"HomeView",components:{TopMenu:L.A,SidebarNav:H}};const N=(0,u.A)(S,[["render",A]]);var R=N,W=n(197);function I(e,t,n,a,o,i){const l=(0,r.g2)("TopMenu"),u=(0,r.g2)("SidebarNav"),c=(0,r.g2)("DeviceWidget"),d=(0,r.g2)("LeafletMap"),s=(0,r.g2)("BarChartAbout"),f=(0,r.g2)("LineChartAbout");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(l),(0,r.bF)(u),(0,r.bF)(k.I,{fluid:""},{default:(0,r.k6)((()=>[(0,r.bF)(w.L,null,{default:(0,r.k6)((()=>[(0,r.bF)(F.B,null,{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1})])),_:1}),(0,r.bF)(w.L,{class:"flex-nowrap",style:{"overflow-x":"auto","flex-wrap":"nowrap"}},{default:(0,r.k6)((()=>[(0,r.bF)(F.B,{style:{"min-width":"350px"}},{default:(0,r.k6)((()=>[(0,r.bF)(d)])),_:1}),(0,r.bF)(F.B,{style:{"min-width":"350px"}},{default:(0,r.k6)((()=>[(0,r.bF)(W.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1})])),_:1})])),_:1}),(0,r.bF)(w.L,null,{default:(0,r.k6)((()=>[(0,r.bF)(F.B,null,{default:(0,r.k6)((()=>[(0,r.bF)(W.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(f)])),_:1})])),_:1})])),_:1})])),_:1})])}var P=n(4232);const U={style:{height:"30vh",width:"100%"}},K={ref:"chartCanvas"},X={style:{padding:"auto"}};function V(e,t,n,a,o,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",U,[(0,r.Lk)("canvas",K,null,512)]),(0,r.Lk)("div",null,[(0,r.Lk)("h2",X,"Last Update: "+(0,P.v_)(e.formattedTimestamp),1)]),(0,r.Lk)("div",null,[(0,r.Lk)("h2",{style:(0,P.Tr)({color:e.thd<.05?"green":e.thd<.1?"orange":"red"})}," Total Harmonic Distortion (THD): "+(0,P.v_)((100*e.thd).toFixed(2))+"%",5)])],64)}n(8111),n(1701);var $=n(144),Z=n(6912),J=n(4373);Z.t1.register(...Z.$L);var q=(0,r.pM)({name:"ChartWithButton",setup(){const e=(0,$.KR)(!1),t=(0,$.KR)(null),n=(0,$.KR)(null),a=(0,$.KR)(null),o=(0,$.KR)(null);let i=null;const l=(e,a)=>{t.value&&(n.value&&(n.value.destroy(),n.value=null),n.value=new Z.t1(t.value,{type:"bar",data:{labels:e,datasets:[{label:"Magnitude",data:a,backgroundColor:"rgba(75, 192, 192, 0.6)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Harmonic Magnitudes",color:"white",font:{size:20}}},scales:{y:{title:{display:!0,text:"Magnitudes",color:"white",font:{size:14}},beginAtZero:!0},x:{title:{display:!0,text:"Order of harmonics",color:"white",font:{size:14}},beginAtZero:!0}}}}))},u=async()=>{try{const e=await J.A.get("https://api.ch-data.xyz/api/harmonics");console.log("Fetched data:",e.data);const t=e.data[0]?.Magnitude;if(!Array.isArray(t))throw new Error("Magnitude is not an array");const n=t.map(((e,t)=>`${t+1}`));await(0,r.dY)(),l(n,t)}catch(e){console.error("Failed to fetch chart data:",e)}},c=async()=>{try{const e=await J.A.get("https://api.ch-data.xyz/api/timestamp"),t=e.data?.[0]?.date_time;a.value=t||null,console.log("Fetched timestamp:",a.value)}catch(e){console.error("Failed to fetch timestamp:",e)}},d=async()=>{try{const e=await J.A.get("https://api.ch-data.xyz/api/thd");o.value=e.data?.THD??null,console.log("Fetched THD:",o.value)}catch(e){console.error("Failed to fetch THD:",e)}},s=(0,r.EW)((()=>{if(!a.value)return"N/A";const e=new Date(a.value);return e.toLocaleString()})),f=async()=>{if(!e.value){e.value=!0;try{await Promise.all([u(),c(),d()])}finally{e.value=!1}}};return(0,r.sV)((()=>{f(),i=setInterval((()=>{f()}),5e3)})),(0,r.xo)((()=>{n.value&&(n.value.destroy(),n.value=null),clearInterval(i)})),{chartCanvas:t,updateChart:f,isUpdating:e,timestamp:a,formattedTimestamp:s,thd:o}}});const G=(0,u.A)(q,[["render",V]]);var Y=G;const Q={id:"map",style:{height:"100%",width:"100%"}};function ee(e,t,n,a,o,i){return(0,r.uX)(),(0,r.CE)("div",Q)}n(4114);var te=n(6886),ne=n.n(te),ae=(n(954),n(8249)),re=n(7024),oe=n(1071);delete ne().Icon.Default.prototype._getIconUrl,ne().Icon.Default.mergeOptions({iconRetinaUrl:ae,iconUrl:re,shadowUrl:oe});var ie={name:"LeafletMap",mounted(){const e=ne().map("map").setView([53.4808,-2.2426],17);ne().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(e);const t=ne().marker([53.4808,-2.2426]).addTo(e).bindPopup("53.4808, -2.2426");t.on("click",(()=>{this.$router.push("/device1")}));const n=ne().control({position:"bottomright"});n.onAdd=function(){const e=ne().DomUtil.create("div","info legend");return e.innerHTML='\n    <h4>Legend</h4>\n    <i style="background: red"></i> THD>10% <br>\n    <i style="background: yellow"></i> THD<10% <br>\n    <i style="background: blue"></i> THD<5% <br>\n  ',e},n.addTo(e);const a=[[53.4808,-2.2426,.91]];ne().heatLayer(a,{radius:25,blur:20,maxZoom:17}).addTo(e),setTimeout((()=>{e.invalidateSize()}),300),window.addEventListener("resize",this.handleResize),window.addEventListener("orientationchange",this.handleResize)},methods:{handleResize(){this.map&&setTimeout((()=>{this.map.invalidateSize()}),300)}},beforeUnmount(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("orientationchange",this.handleResize),this.map&&(this.map.remove(),this.map=null)}};const le=(0,u.A)(ie,[["render",ee]]);var ue=le;const ce={style:{height:"30vh"}},de={ref:"lineChartCanvas"};function se(e,t,n,a,o,i){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",ce,[(0,r.Lk)("canvas",de,null,512)])])}Z.t1.register(...Z.$L);var fe=(0,r.pM)({name:"FirstHarmonicLineChart",setup(){const e=(0,$.KR)(null),t=(0,$.KR)(null),n=(0,$.KR)(!1);let a=null;const o=async()=>{if(!n.value){n.value=!0;try{const[n,a]=await Promise.all([J.A.get("https://api.ch-data.xyz/api/first_magnitudes"),J.A.get("https://api.ch-data.xyz/api/third_magnitudes")]),r=n.data.map((e=>e["first magnitudes"])),o=a.data.map((e=>e["third magnitudes"])),i=r.map(((e,t)=>`${t+1}`));t.value&&(t.value.destroy(),t.value=null,await new Promise((e=>setTimeout(e,50)))),t.value=new Z.t1(e.value,{type:"line",data:{labels:i,datasets:[{label:"1st Harmonic Magnitudes",data:r,fill:!1,borderColor:"rgba(75, 192, 192, 1)",tension:.1},{label:"3rd Harmonic Magnitudes",data:o,fill:!1,borderColor:"rgba(255, 99, 132, 1)",tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Harmonic Magnitudes Over Time",color:"white",font:{size:20}}},scales:{y:{title:{display:!0,text:"Magnitudes",color:"white",font:{size:14}},beginAtZero:!0},x:{title:{display:!0,text:"Time",color:"white",font:{size:14}}}}}})}catch(a){console.error("Failed to load line chart data:",a)}finally{n.value=!1}}};return(0,r.sV)((()=>{o(),a=setInterval((()=>{o()}),5e3)})),(0,r.xo)((()=>{t.value&&(t.value.destroy(),t.value=null),a&&clearInterval(a)})),{lineChartCanvas:e,fetchLineChartData:o,isUpdating:n}}});const pe=(0,u.A)(fe,[["render",se]]);var ve=pe,he=n(697),me=n(9669);function be(e,t,n,a,o,i){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(W.J,{elevation:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(he.O,null,{default:(0,r.k6)((()=>[(0,r.bF)(w.L,null,{default:(0,r.k6)((()=>[(0,r.bF)(F.B,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.bF)(me.w,{color:"error",icon:"mdi-thermometer",size:"50"}),(0,r.eW)((0,P.v_)(i.widgetData.temp_val),1)])),_:1}),(0,r.bF)(F.B,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.bF)(me.w,{icon:"mdi-battery",size:"50"}),(0,r.eW)((0,P.v_)(i.widgetData.battery_val),1)])),_:1}),(0,r.bF)(F.B,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.bF)(me.w,{color:"success",icon:"mdi-access-point",size:"50"}),t[0]||(t[0]=(0,r.eW)(" ONLINE "))])),_:1}),(0,r.bF)(F.B,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.eW)(" Location: "+(0,P.v_)(i.widgetData.location),1)])),_:1})])),_:1})])),_:1})])),_:1})])}var ge={computed:{widgetData(){const e={"/device1":{battery_val:"100%",temp_val:"26Â°C",location:"Manchester"},"/device2":{battery_val:"80%",temp_val:"28Â°C",location:"London"},"/device3":{battery_val:"70%",temp_val:"21Â°C",location:"Edinburgh"}};return e[this.$route.path]||{title:"Default Title",content:"Default Content"}}}};const ye=(0,u.A)(ge,[["render",be]]);var ke=ye,we=(0,r.pM)({components:{BarChartAbout:Y,TopMenu:L.A,SidebarNav:H,LeafletMap:ue,LineChartAbout:ve,DeviceWidget:ke}});const Fe=(0,u.A)(we,[["render",I]]);var _e=Fe;const Ce=[{path:"/",name:"home",component:R},{path:"/about",name:"about",component:()=>n.e(240).then(n.bind(n,8240))},{path:"/login_page",name:"login",component:()=>n.e(380).then(n.bind(n,3380))},{path:"/device1",name:"device1",component:_e},{path:"/device2",name:"device2",component:_e},{path:"/device3",name:"device3",component:_e}],Ae=(0,g.aE)({history:(0,g.Bt)(),routes:Ce});var Le=Ae;b(),(0,a.Ef)(s).use(Le).use(m).mount("#app")},2296:function(e,t,n){n.d(t,{A:function(){return g}});var a=n(6768),r=n(4232),o=n(3367),i=n(8332),l=n(6990),u=n(8088),c=n(1720),d=n(6887),s=n(6498),f=n(7294),p=n(2585);function v(e,t,n,v,h,m){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(o.z,{elevation:2},{prepend:(0,a.k6)((()=>[(0,a.bF)(i.Z,{onClick:t[0]||(t[0]=e=>h.drawer=!h.drawer)})])),default:(0,a.k6)((()=>[(0,a.bF)(c.h),(0,a.bF)(l.l,{class:"text-center",id:"title"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Compact Harmonics")]))),_:1}),(0,a.bF)(c.h),(0,a.bF)(u.D,{variant:"outlined",elevation:"2",to:"/login_page"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Login")]))),_:1})])),_:1}),(0,a.bF)(p.e,{modelValue:h.drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>h.drawer=e),temporary:""},{default:(0,a.k6)((()=>[(0,a.bF)(d.x8,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.navItems,(e=>((0,a.uX)(),(0,a.Wv)(s.g,{key:e.text,to:e.route},{default:(0,a.k6)((()=>[(0,a.bF)(f.U,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(e.text),1)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})])),_:1},8,["modelValue"])],64)}var h={data(){return{drawer:!1,navItems:[{text:"Home",route:"/"},{text:"About",route:"/about"}]}}},m=n(1241);const b=(0,m.A)(h,[["render",v],["__scopeId","data-v-2794ab62"]]);var g=b},2600:function(e,t,n){e.exports=n.p+"img/compact_harmonics.f1c4a35d.png"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,o){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,u=0;u<a.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return a[e]}}));return i["default"]=function(){return a},n.d(o,i),o}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(53===e?"webfontloader":e)+"."+{53:"ce139448",240:"996d539f",380:"09c1753c"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+".eac296fa.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="compact_harmonics:";n.l=function(a,r,o,i){if(e[a])e[a].push(r);else{var l,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var s=c[d];if(s.getAttribute("src")==a||s.getAttribute("data-webpack")==t+o){l=s;break}}l||(u=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+o),l.src=a),e[a]=[r];var f=function(t,n){l.onerror=l.onload=null,clearTimeout(p);var r=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),u&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/compact-harmonics/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,r,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",n.nc&&(i.nonce=n.nc);var l=function(n){if(i.onerror=i.onload=null,"load"===n.type)r();else{var a=n&&n.type,l=n&&n.target&&n.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+l+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=l,i.parentNode&&i.parentNode.removeChild(i),o(u)}};return i.onerror=i.onload=l,i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=n[a],o=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(o===e||o===t))return r}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){r=i[a],o=r.getAttribute("data-href");if(o===e||o===t)return r}},a=function(a){return new Promise((function(r,o){var i=n.miniCssF(a),l=n.p+i;if(t(i,l))return r();e(a,l,null,r,o)}))},r={524:0};n.f.miniCss=function(e,t){var n={380:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=a(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,a){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise((function(n,a){r=e[t]=[n,a]}));a.push(r[2]=o);var i=n.p+n.u(t),l=new Error,u=function(a){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,r[1](l)}};n.l(i,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,i=a[0],l=a[1],u=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(u)var d=u(n)}for(t&&t(a);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},a=self["webpackChunkcompact_harmonics"]=self["webpackChunkcompact_harmonics"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(2176)}));a=n.O(a)})();
//# sourceMappingURL=app.46592e0d.js.map